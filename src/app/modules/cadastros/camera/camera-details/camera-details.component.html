<div class="flex min-w-0 flex-auto flex-col">
    <!-- Header -->
    <div class="bg-card">
        <div class="mx-auto flex w-full max-w-screen-xl flex-col px-6 sm:px-8">
            <div class="my-8 flex min-w-0 flex-auto flex-col sm:my-12 sm:flex-row sm:items-center">
                <!-- Avatar and name -->
                <div class="flex min-w-0 flex-auto items-center">
                    <div class="text-4xl font-extrabold tracking-tight">Câmeras</div>
                </div>
                <!-- Actions -->
                <div class="mt-6 flex items-center space-x-3 sm:ml-2 sm:mt-0">
                    <!-- <button class="bg-accent" mat-flat-button [color]="'accent'">
                        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:envelope'"></mat-icon>
                        <span class="ml-2">Messages</span>
                    </button>
                    <button mat-flat-button [color]="'primary'">
                        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:cog-8-tooth'"></mat-icon>
                        <span class="ml-2">Settings</span>
                    </button> -->

                    <!-- <div>
                        <form [formGroup]="filterForm" class="flex flex-row items-center gap-3 overflow-hidden" >
                            <mat-form-field style="width: 130px;">
                                <mat-label>Início</mat-label>
                                <input matInput formControlName="vendedor" type="date">
                            </mat-form-field>
            
                            <mat-form-field style="width: 130px;">
                                <mat-label>Fim</mat-label>
                                <input matInput formControlName="aeronave" type="date">
                            </mat-form-field>
            
                            <button mat-raised-button (click)="clearFilter()">
                                <span class="ml-2 mr-1">Limpar</span>
                            </button>
            
                            <button mat-raised-button [color]="'primary'" (click)="filter()">
                                <span class="ml-2 mr-1">Buscar</span>
                            </button>
                        </form>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main -->
    <div class="-mt-px flex-auto border-t pt-4 sm:pt-6 pb-8">
        <!-- <div class="mx-auto w-full max-w-screen-xl">
            <form [formGroup]="filterForm" class="flex flex-row items-center gap-3 overflow-hidden" >
                <mat-form-field style="width: 130px;">
                    <mat-label>Início</mat-label>
                    <input matInput formControlName="vendedor" type="date">
                </mat-form-field>

                <mat-form-field style="width: 130px;">
                    <mat-label>Fim</mat-label>
                    <input matInput formControlName="aeronave" type="date">
                </mat-form-field>

                <button mat-raised-button (click)="clearFilter()">
                    <span class="ml-2 mr-1">Limpar</span>
                </button>

                <button mat-raised-button [color]="'primary'" (click)="filter()">
                    <span class="ml-2 mr-1">Buscar</span>
                </button>
            </form>
        </div> -->
        
        <div class="mx-auto w-full max-w-screen-xl">
            <div class="grid w-full min-w-0 grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-4">
                <!-- Receita Bruta -->
                <div class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow">
                    <div class="flex items-start justify-between">
                        <div class="truncate text-lg font-medium leading-6 tracking-tight">
                            Receita Bruta
                        </div>
                    </div>
                    <div class="mt-2 flex flex-col items-center">
                        <div class="font-bold leading-none tracking-tight text-blue-500" style="font-size: 2rem;">
                            R$ {{this.totalBruto | number:'1.2-2'}}
                        </div>
                        <div class="text-lg font-medium text-blue-600 dark:text-blue-500">
                            sem descontos
                        </div>
                    </div>
                </div>
                <!-- Receita Líquida -->
                <div class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow">
                    <div class="flex items-start justify-between">
                        <div class="truncate text-lg font-medium leading-6 tracking-tight">
                            Receita Líquida
                        </div>
                    </div>
                    <div class="mt-2 flex flex-col items-center">
                        <div class="font-bold leading-none tracking-tight text-red-500" style="font-size: 2rem;">
                            R$ {{this.totalLiquido | number:'1.2-2'}}
                        </div>
                        <div class="text-lg font-medium text-red-600 dark:text-red-500">
                            com descontos
                        </div>
                    </div>
                </div>
                <!--  Comissão vendedor -->
                <div class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow">
                    <div class="flex items-start justify-between">
                        <div class="truncate text-lg font-medium leading-6 tracking-tight">
                            Comissão vendedor
                        </div>
                    </div>
                    <div class="mt-2 flex flex-col items-center">
                        <div class="font-bold leading-none tracking-tight text-amber-500" style="font-size: 2rem;">
                            R$ {{this.comissaoVendedor | number:'1.2-2'}}
                        </div>
                        <div class="text-lg font-medium text-amber-600 dark:text-amber-500">
                            mês atual
                        </div>
                    </div>
                </div>
                <!-- Câmeras vendidas -->
                <div class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow">
                    <div class="flex items-start justify-between">
                        <div class="truncate text-lg font-medium leading-6 tracking-tight">
                            Câmeras vendidas
                        </div>
                    </div>
                    <div class="mt-2 flex flex-col items-center">
                        <div class="font-bold leading-none tracking-tight text-green-500" style="font-size: 2rem;">
                            {{this.totalVendas}}
                        </div>
                        <div class="text-lg font-medium text-green-600 dark:text-green-500">
                            vendas
                        </div>
                    </div>
                </div>                
            </div>            
        </div>

        <div class="mx-auto w-full max-w-screen-xl mt-6">
            <div class="grid w-full">
                <!-- Início tabela - código aeronaves -->

                    <div class="inset-0 flex flex-col min-w-0 overflow-hidden bg-card dark:bg-transparent">
                    
                        <!-- Header -->
                        <div class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between py-8 px-6 md:px-8 border-b">
                    
                            <!-- Loader -->
                            @if(isLoading){
                                <div class="absolute inset-x-0 bottom-0">
                                    <mat-progress-bar [mode]="'indeterminate'"></mat-progress-bar>
                                </div>
                            }
                    
                            <!-- Title -->
                            <div class="text-4xl font-extrabold tracking-tight">Listagem de vendas</div>
                    
                            <!-- Actions -->
                            <div class="flex flex-shrink-0 items-center mt-6 sm:mt-0 sm:ml-4">
                                <!-- Filter button -->
                                <button mat-icon-button aria-label="Show/hide filters" (click)="onFilterExpanded()">
                                    <mat-icon>filter_list</mat-icon>
                                </button>
                                <!-- Add product button -->
                                <button class="ml-4" mat-flat-button [color]="'primary'" [routerLink]="['/cameras/novo']">
                                    <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon>
                                    <span class="ml-2 mr-1">Novo</span>
                                </button>
                            </div>
                        </div>
                    
                        <!-- Filtros -->
                        <div>
                            <mat-expansion-panel hideToggle [expanded]="filtersExpanded">
                                <form [formGroup]="filterForm" class="flex flex-row items-center gap-3 mt-6 overflow-hidden">
                                    <mat-form-field>
                                        <mat-label>Vendedor</mat-label>
                                        <input matInput formControlName="vendedor">
                                    </mat-form-field>
                    
                                    <mat-form-field>
                                        <mat-label>Aeronave</mat-label>
                                        <input matInput formControlName="aeronave">
                                    </mat-form-field>

                                    <mat-form-field>
                                        <mat-label>Início</mat-label>
                                        <input matInput formControlName="dataInicio" type="date">
                                    </mat-form-field>

                                    <mat-form-field>
                                        <mat-label>Término</mat-label>
                                        <input matInput formControlName="dataTermino" type="date">
                                    </mat-form-field>
                    
                                    <button mat-raised-button (click)="clearFilter()">
                                        <span class="ml-2 mr-1">Limpar</span>
                                    </button>
                    
                                    <button mat-raised-button [color]="'primary'" (click)="filter()">
                                        <span class="ml-2 mr-1">Buscar</span>
                                    </button>
                                </form>
                            </mat-expansion-panel>
                        </div>
                    
                        <!-- Main -->
                        <div class="flex flex-auto overflow-hidden">
                    
                            <!-- Products list -->
                            <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden">
                    
                                @if(cameras.length > 0){
                                    <ng-container>
                        
                                        <!-- Table wrapper -->
                                        <div class="overflow-x-auto sm:overflow-y-auto" cdkScrollable>
                        
                                            <!-- Table -->
                                            <table class="w-full min-w-320 table-fixed bg-transparent"
                                                [ngClass]="{'pointer-events-none': isLoading}" mat-table matSort
                                                (matSortChange)="onSort($event)" [matSortActive]="'matricula'" [matSortDisableClear]="true"
                                                [matSortDirection]="'asc'" [multiTemplateDataRows]="false" [dataSource]="cameras"
                                                [trackBy]="trackByFn">
                        
                                                <!-- dataVenda -->
                                                <ng-container matColumnDef="data">
                                                    <th class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef
                                                        mat-sort-header disableClear>
                                                        Data
                                                    </th>
                                                    <td class="pr-8 truncate" mat-cell *matCellDef="let row">
                                                        {{row.data | date: 'dd/MM/yyyy'}}
                                                    </td>
                                                </ng-container>

                                                <!-- horaVoo -->
                                                <ng-container matColumnDef="horaVoo">
                                                    <th class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef
                                                        mat-sort-header disableClear>
                                                        Hora
                                                    </th>
                                                    <td class="pr-8 truncate" mat-cell *matCellDef="let row">
                                                        {{row.horaVoo}}
                                                    </td>
                                                </ng-container>

                                                <!-- nomePassageiro -->
                                                <ng-container matColumnDef="nomePassageiro">
                                                    <th class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef
                                                        mat-sort-header disableClear>
                                                        Passageiro
                                                    </th>
                                                    <td class="pr-8 truncate" mat-cell *matCellDef="let row">
                                                        {{row.nomePassageiro}}
                                                    </td>
                                                </ng-container>

                                                <!-- aeronave -->
                                                <ng-container matColumnDef="aeronave">
                                                    <th class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef
                                                        mat-sort-header disableClear>
                                                        Aeronave
                                                    </th>
                                                    <td class="pr-8 truncate" mat-cell *matCellDef="let row">
                                                        {{row.aeronave}}
                                                    </td>
                                                </ng-container>

                                                <!-- vendedor -->
                                                <ng-container matColumnDef="vendedor">
                                                    <th class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef
                                                        mat-sort-header disableClear>
                                                        Vendedor
                                                    </th>
                                                    <td class="pr-8 truncate" mat-cell *matCellDef="let row">
                                                        {{row.vendedor}}
                                                    </td>
                                                </ng-container>

                                                <!-- valorBruto -->
                                                <ng-container matColumnDef="valorBruto">
                                                    <th class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef
                                                        mat-sort-header disableClear>
                                                        Valor Bruto
                                                    </th>
                                                    <td class="pr-8 truncate" mat-cell *matCellDef="let row">
                                                        R$ {{row.valorBruto}}
                                                    </td>
                                                </ng-container>

                                                <!-- valorLiquido -->
                                                <ng-container matColumnDef="valorLiquido">
                                                    <th class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef
                                                        mat-sort-header disableClear>
                                                        Valor Líquido
                                                    </th>
                                                    <td class="pr-8 truncate" mat-cell *matCellDef="let row">
                                                        R$ {{row.valorLiquido}}
                                                    </td>
                                                </ng-container>

                                                <!-- status -->
                                                <ng-container matColumnDef="status">
                                                    <th class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell *matHeaderCellDef
                                                        mat-sort-header disableClear>
                                                        Status
                                                    </th>
                                                    <td class="pr-8 truncate" mat-cell *matCellDef="let row" [ngStyle]="{'color': row.status === 'Em edição' ? 'red' : row.status === 'Editado e enviado' ? 'green' : row.status === 'Editado e não enviado' ? 'rgb(207, 207, 0)' : row.status === 'Estornado' ? 'red' : 'black'}">
                                                        {{row.status}}
                                                    </td>                                                
                                                </ng-container>

                                                <!-- actions -->
                                                <ng-container matColumnDef="actions">
                                                    <th style="text-align: center;" class="bg-gray-50 dark:bg-black dark:bg-opacity-5" mat-header-cell
                                                        *matHeaderCellDef>
                                                        Ações
                                                    </th>
                                                    <td class="pr-8" mat-cell *matCellDef="let row" style="padding-left: 32;padding-right: 16;padding-left: 32px;">
                                                        <div style="text-align: center;">
                                                            <!-- <button mat-icon-button (click)="details(row.id)">
                                                                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                                                            </button>

                                                            <button mat-icon-button (click)="edit(row.id)">
                                                                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:pencil'"></mat-icon>
                                                            </button>
                        
                                                            <button mat-icon-button (click)="deletar(row.id)">
                                                                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:trash'"></mat-icon>
                                                            </button> -->

                                                            <button mat-icon-button [matMenuTriggerFor]="summaryMenu">
                                                                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_mini:ellipsis-vertical'"></mat-icon>
                                                            </button>
                                                            <mat-menu #summaryMenu="matMenu">
                                                                <button mat-menu-item (click)="details(row.id)">
                                                                    Visualizar
                                                                </button>
                                                                <button mat-menu-item (click)="edit(row.id)">
                                                                    Editar
                                                                </button>
                                                                <button mat-menu-item (click)="deletar(row.id)">
                                                                    Excluir
                                                                </button>
                                                            </mat-menu>
                                                        </div>
                                                    </td>
                                                </ng-container>
                        
                                                <tr class="shadow" mat-header-row *matHeaderRowDef="productsTableColumns; sticky: true"></tr>
                                                <tr class="h-18 hover:bg-hover" mat-row *matRowDef="let row; columns: productsTableColumns;">
                                                </tr>
                        
                                            </table>
                        
                                        </div>
                        
                                        <mat-paginator
                                            class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent"
                                            [ngClass]="{'pointer-events-none': isLoading}" [length]="pagination.length"
                                            [pageIndex]="pagination.page" [pageSize]="pagination.size" [pageSizeOptions]="[1, 5, 10, 25, 100]"
                                            [showFirstLastButtons]="true" (page)="onPage($event)"></mat-paginator>
                        
                                    </ng-container>
                                }
                    
                                @if(cameras.length == 0){
                                    <ng-container>
                                        <div class="p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center">Não há câmeras!
                                        </div>
                                    </ng-container>
                                }
                    
                            </div>
                        </div>
                    </div>

                <!-- Fim tabela - código aeronaves -->           
            </div>            
        </div>
    </div>
</div>